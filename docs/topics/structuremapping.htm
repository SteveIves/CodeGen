<!DOCTYPE HTML>
<html id="hs-topic-p">
<!-- saved from url=(0025)http://www.helpsmith.com/ -->
<head>
<title>Structure Mapping</title>
<meta charset="windows-1252" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="generator" content="HelpSmith 8.4 (Build 21.401)" />
<style type="text/css" media="screen">
html {
  overflow: hidden;
  margin: 0;
  padding: 0;
  height: 100%;
}
body {
  overflow: hidden;
  margin: 0;
  padding: 0;
  height: 100%;
}
#non-scrolling-area {
  padding: 0 10px 0 10px;
  background-color: #5e5f5f;
}
#container {
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}
#content {
  padding: 0 10px 5px 10px;
}
</style>
<link type="text/css" rel="stylesheet" href="../css/topics/style.css" />
<script type="text/javascript" src="../js/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../js/nsa.js?e98506cb"></script>
<script type="text/javascript" src="../js/settings.js?b5bcd831"></script>
<script type="text/javascript" src="../js/core.min.js?e98506cb"></script>
<script type="text/javascript" src="../js/topic.min.js?e98506cb"></script>
<script type="text/javascript">
	var topicContext = 90;
</script>
<!-- Web Help Topic -->
  
<!-- HTML Help (CHM) Topic -->
</head>
<body>
<div id="non-scrolling-area">
  <p><span class="ts0">Structure Mapping</span></p>
</div>
<div id="container">
  <div id="content-background">
    <div id="content">
      <p>&nbsp;</p>
      <p class="ps0"><span class="ts2">There are occasions when it is useful to be able to process more than one repository structure at the same time, or at least to have the ability to make references to a second structure, or fields in the second structure.</span></p>
      <p class="ps0"><span class="ts2">For example, consider the situation where you are creating routines which you will use to access data in a relational database table. One of the routines that you create might be responsible for creating a relational database table based on the attributes of a repository structure (fields become columns, etc.). You may find that the repository structure does not quite meet the requirements of what you are trying to achieve. For example, you may want to assign different names to the columns it the database table, omit some fields from the table, or perhaps change some data types. You can&rsquo;t change the current repository structure to meet your new requirements, because that would impact your other applications, and obviously the current structure needs to match the layout of the actual data file.</span></p>
      <p class="ps0"><span class="ts2">To assist in addressing issues like these, CodeGen allows you to create a new repository structure and then &ldquo;map&rdquo; the new structure to an existing structure.&nbsp; You can also map fields in the new structure to fields in the original structure.</span></p>
      <p class="ps0"><span class="ts2">To map a new structure to an existing structure you add a special code into the new structures long description or user text field, like this:</span></p>
      <p class="ps9"><a id="MAP"></a><span class="ts3">@MAP=original_structure;</span></p>
      <p class="ps0"><span class="ts2">To map fields in your new structure to fields in an existing structure, add @MAP={otherfield}; to the new fields long description or user text string, like this:</span></p>
      <p class="ps9"><span class="ts3">@MAP=original_field;</span></p>
      <p class="ps0"><span class="ts2">Note that in both cases it is important that the word MAP appears in uppercase, and there should be no spaces between the leading </span><span class="ts5">@</span><span class="ts2">&nbsp;character and the trailing </span><span class="ts5">;</span><span class="ts2">&nbsp;(semi-colon) character.</span></p>
      <p class="ps0"><span class="ts1">Creating Mapped Structures</span></p>
      <p class="ps0"><span class="ts2">To assist you in creating mapped structures in the repository, CodeGen includes a utility program called </span><a href="mappreputility.htm" class="hs0">MapPrep</a><span class="ts2">. This utility can significantly reduce the amount of effort required to create mapped structures, especially when the structure has a large number of fields.</span></p>
      <p class="ps0"><span class="ts1">Mapped Field Conversions</span></p>
      <p class="ps0"><span class="ts2">When performing field mapping, you may optionally specify functions to be called when data is mapped into the field in the new target structure, or unmapped back into the field in the original structure. This can be useful if you need to perform transformations on the data as mapping occurs.&nbsp;For example, you may wish to convert the data in a description field between uppercase in the original field, and mixed case in the new field, or convert between a decimal field in the original structure and an implied decimal in the new structure.</span></p>
      <p class="ps0"><span class="ts2">To specify a mapping conversion function for a mapped field you add another special code in the fields&rsquo; user text string or long description, like this:</span></p>
      <p class="ps9"><a id="MAPF"></a><span class="ts3">@MAPF=mapping_function;</span></p>
      <p class="ps0"><span class="ts2">To specify a mapping un-conversion function for a mapped field you add another special code in the fields&rsquo; user text string or long description, like this:</span></p>
      <p class="ps9"><a id="UNMAPF"></a><span class="ts3">@UNMAPF=unmapping_function;</span></p>
      <p class="ps0"><span class="ts1">Writing Conversion Functions</span></p>
      <p class="ps0"><span class="ts2">Mapping and unmapping functions must be declared as external functions, with a return value data type which matches the target field.&nbsp; They must accept a single parameter which is used to pass in the original value to be mapped or unmapped.&nbsp; For example:</span></p>
      <p class="ps9"><span class="ts12">function </span><span class="ts3">DivideBy100, d.</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ts13">required in</span><span class="ts3">&nbsp;originalValue, d</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ts13">endparams</span><br /><span class="ts12">proc</span><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ts13">freturn </span><span class="ts3">(originalValue / 100.0)</span><br /><span class="ts12">endfunction</span></p>
      <p class="ps0"><span class="ts3">&nbsp;</span></p>
      <p><span class="ts2">&nbsp;</span></p>
      <p><span class="ts2">&nbsp;</span></p>
      <div>
        <hr class="hline1" />
      </div>
      <p class="ps8"><span class="ts10">Copyright &copy; 2021&nbsp; Synergex International, Inc.</span></p>
    </div>
  </div>
</div>
</body>
</html>